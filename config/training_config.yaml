# Training Configuration for Swimming Pool Detection
# Author: Swimming Pool Detection Team
# Date: 2026-01-02
# Updated: 2026-01-04 - Added precision improvements

# Model configuration
model:
  variant: "yolov11s"  # Upgraded from yolov11n for better accuracy
  pretrained: true
  pretrained_weights: null  # Path to custom pretrained weights, null for default
  num_classes: 1

# Training hyperparameters
training:
  epochs: 200  # Increased for better convergence
  batch_size: 2  # Reduced for YOLOv11s on GTX 1650
  image_size: 512
  workers: 4

# Optimizer settings
optimizer:
  name: "AdamW"
  learning_rate: 0.001
  weight_decay: 0.0005
  momentum: 0.937
  warmup_epochs: 3
  warmup_momentum: 0.8
  warmup_bias_lr: 0.1

# Learning rate scheduler
scheduler:
  name: "cosine"
  min_lr: 0.0001

# Early stopping
early_stopping:
  enabled: true
  patience: 50  # Increased for longer training
  min_delta: 0.001
  monitor: "val/mAP50"
  mode: "max"

# Checkpointing
checkpoint:
  save_period: 10
  save_best: true
  save_last: true
  max_checkpoints: 5

# Logging
logging:
  tensorboard: true
  log_dir: "logs"
  log_frequency: 10
  verbose: true

# Device settings
device:
  cuda: true
  device_id: "0"
  amp: false  # Disabled for GTX 1650 compatibility

# Loss weights
loss:
  box: 7.5
  cls: 0.5
  dfl: 1.5

# Data augmentation (Advanced)
augmentation:
  mixup: 0.1  # Blend two images
  copy_paste: 0.1  # Copy paste augmentation
  mosaic: 1.0  # Mosaic augmentation
  hsv_h: 0.015  # HSV-Hue augmentation
  hsv_s: 0.7  # HSV-Saturation augmentation
  hsv_v: 0.4  # HSV-Value augmentation
  degrees: 10.0  # Rotation
  translate: 0.1  # Translation
  scale: 0.5  # Scale
  fliplr: 0.5  # Horizontal flip
  flipud: 0.1  # Vertical flip (useful for aerial)

# Validation settings
validation:
  val_frequency: 1
  conf_threshold: 0.001
  iou_threshold: 0.7
  max_detections: 300

# Data paths (relative to project root)
paths:
  dataset_yaml: "data/dataset.yaml"
  output_dir: "logs/checkpoints"
  tensorboard_dir: "logs/tensorboard"
